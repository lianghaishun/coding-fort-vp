# 包管理

## 1.概念

1. 模块（module）

- 通常以单个文件形式存在的功能片段，入口文件通常称为`入口模块`或`主模块`。

2. 库（library）

- 以一个或多个模块组成的完整功能块，为开发中某一方面的问题提供完整的解决方案。

3. 包（package）

- 包含元数据的库，这些元数据包括：名称、描述、git 主页、许可证协议、作者、依赖等。
- 包（`package`）是一个或多个 js 模块的集合，它们共同完成某一类功能的任务。
- 可以简单的认为每一个工程都是一个包。
- 有些包是为了提供给别人用，这种包也叫第三方库。

4. 什么是包管理器？

- 包管理器是一个命令行工具，用于管理包。
- 前端常见的包管理器有：[npm](./Npm.md)、`yarn`、`cnpm`、`pnpm` 等。
- 包管理器出现前遇到的问题：
  - 下载过程繁琐
  - 如果依赖其他库，还需按照要求先下载其他库
  - 开发环境中大量的库如何在生产环境还原，区分
  - 更新库麻烦
  - 自己开发的库，如何在下一次开发使用
- 包管理器具备以下功能：
  - 让开发者可以轻松的下载包
  - 让开发者可以轻松的升级和卸载包
  - 能够自动管理包的依赖

5. 什么是 cli ？

- `cli` 是 `command line interface` 的缩写，即命令行界面。
- `cli` 是指在命令行中输入命令，执行命令，得到命令执行结果。

## 2.前端包管理

### 2.1.[npm (Node Package Manager)](./Npm.md)

- **历史最悠久**：作为 Node.js 的默认包管理器，npm 拥有庞大的生态系统和丰富的社区支持。
- **广泛采用**：几乎所有的 JavaScript 项目都会使用 npm 来管理依赖。
- **强大的命令行工具**：提供了一系列命令来简化包的安装、发布和版本控制（如 `npm install`, `npm publish` 等）。
- **配置文件**：依赖关系记录在 `package.json` 文件中，包括项目所需的库及其版本范围。
- **私有包支持**：除了公共注册表外，npm 还允许用户创建和托管私有包。

### 2.2.Yarn

- **由 Facebook 推出**：旨在解决 npm 在性能和一致性方面的不足。
- **快速安装**：利用缓存机制显著加快依赖项的安装速度。
- **锁定文件**：`yarn.lock` 确保所有开发者的环境中使用完全相同的依赖版本，避免因不同版本导致的问题。
- **并行化操作**：支持并行下载多个包，进一步提升效率。
- **工作区支持**：特别适合管理包含多个子项目的大型仓库。

### 2.3.pnpm

- **优化磁盘空间**：不同于 npm 和 Yarn 将所有依赖复制到每个项目的 `node_modules` 文件夹中，pnpm 使用硬链接和符号链接来共享全局存储中的依赖，从而节省大量磁盘空间。
- **更快的安装速度**：由于减少了重复文件的数量，pnpm 的安装过程通常比其他包管理器更快。
- **严格的依赖解析**：保证每次安装时都得到一致的结果，减少潜在冲突。
- **兼容性好**：尽管采用了不同的依赖树结构，但 pnpm 完全兼容 npm 和 Yarn 的命令与工作流。

## 3.node 查找包的顺序

1. 查找是否有内置模块
2. 查找当前目录的 `node_modules` 中是否存在该模块
3. 依次查找上级目录的 `node_modules` 中是否存在该模块，直到根目录

## 4.配置源

### 3.1. 查看源

```bash
# 查看源
npm config get registry
```

### 3.2. 配置源

```bash
# 设置为官方源
npm config set registry https://registry.npmjs.org/
# 设置为淘宝源
npm config set registry https://registry.npm.taobao.org/
```

## 4.初始化

```bash
# 初始化
npm init
# 初始化，并自动填写默认值
npm init -y
```

### 4.1.[package.json](./package_json.md)

## 5.[安装包](./Npm.md#npm-命令)

```bash
# 安装包
npm install <package>
```
