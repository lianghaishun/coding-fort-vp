# 小程序项目相关

[微信小程序官方开发文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)<br/>
[微信公众平台](https://mp.weixin.qq.com/)<br/>

## 微信小程序发展前景

### 1. 生态体系

- 通过扩展插件方式进行小程序开发
- 加大对开发者的支持，能够实现更多功能
- 企业引入大量微信小程序业务

### 2. 开放能力

- 开放能力不断增强，匹配更多用户和场景
- 完善开放接口，完善配套服务

### 3. 用户黏性

- 与微信更好结合，用户黏性高

## 开发工具使用

### 1. 工具栏

工具栏提供一些常用功能的快捷按钮：

- 个人中心： 工具栏最左侧的第一个按钮，显示当前登录用户的用户名和头像；
- 模拟器、编辑器、调试器： 用于控制相应工具的显示和隐藏；
- 云开发： 开发者可以使用云开发来开发小程序、小游戏，无需搭建服务器，即可使用云端能力。云开发能力从基础库 2.2.3 开始支持。
- 模式切换下拉菜单： 用于在小程序模式、搜索动态页和插件模式之间切换；
- 编译下拉菜单： 用于切换编译模式，默认为普通编译，可以添加其他编译模式；
- 编译： 编写小程序的代码后，需要编译后才可以运行。默认情况下，直接按 Ctrl+S 快捷键保存代码文件，微信开发者工具会自动编译运行。若需要手动编译，则单击“编译”按钮；
- 预览： 单击“预览”按钮会生成一个二维码，使用手机中的微信扫描二维码，即可在微信中预览小程序的实际运行效果；
- 真机调试： 可以实现直接利用开发者工具，通过网络连接对手机上运行的小程序进行调试，帮助开发者更好地定位和查找在手机上出现的问题；
- 切后台： 用于模拟小程序在手机中且后台的效果；
- 清缓存： 用于清除数据缓存、文件缓存等；
- 上传： 用于将代码上传到小程序管理后台，可以在“开发管理”中查看上传版本，将代码提交审核。需要注意的是，如果在创建项目时使用的 AppID 为测试号，则不会显示“上传” 按钮；
- 版本管理： 用于通过 Git 对小程序代码进行版本管理；

## 创建项目

### 1. 目录结构

| 路径                   | 说明                           |
| ---------------------- | ------------------------------ |
| project.config         | 项目配置文件                   |
| app.js                 | 应用程序的逻辑文件             |
| app.json               | 应用程序的配置文件             |
| app.wxss               | 应用程序的公共样式文件         |
| pages/                 | 存放页面文件的目录             |
| pages/index/           | 存放 index 页面的目录          |
| pages/index/index.js   | index 页面的逻辑文件           |
| pages/index/index.wxml | index 页面的结构文件           |
| pages/index/index.wxss | index 页面的样式文件           |
| page/logs/             | 存放 logs 页面的目录           |
| pages/logs/logs.js     | logs 页面的逻辑文件            |
| pages/logs/logs.json   | logs 页面的配置文件            |
| pages/logs/logs.wxml   | logs 页面的结构文件            |
| pages/logs/logs.wxss   | logs 页面的样式文件            |
| utils/                 | 存放公共脚本文件的目录         |
| utils/utils.js         | 公共脚本文件，保存一些工具代码 |

<bqe>
注意：在微信小程序中，每个页面由<prib>wxml</prib>、<prib>wxss</prib>、<prib>js</prib>、<prib>json</prib>文件组成，其中<prib>wxml</prib>、<prib>js</prib> 文件必须存在。
</bqe>

### 2. 项目设置

在微信开发者工具中，执行菜单栏“设置”-“项目设置” 命令，可以对当前项目进行设置：

- 项目设置： 对当前项目进行设置；
- 域名信息： 显示小程序的安全域名信息，合法域名可在管理后台进行设置；
- 调试基础库： 选择基础库版本，用于在对应版本的微信客户端上运行。高版本的基础库无法兼容低版本的微信客户端。右边的百分比表示该版本的用户占比。
- ES6 转 ES5： 将 JS 代码的 ES6 语法转换为 ES5 语法。
- 上传代码时样式自动补全： 自动检测并补全缺失样式。
- 上传代码时自动压缩： 压缩代码，缩小代码体积。
- 使用 npm 模块： 在小程序中使用 npm 安装第三方包。
- 启用自定义处理命令： 指定编译前、预览前、上传前需要预处理的命令。
- 不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书： 在真实环境中会对这些信息进行校验。如果在开发环境中不进行校验，可以不选择。

### 3. 权限管理

小程序管理后台允许开发团队中的不同身份的成员登录，通过权限控制来区分不同的用户身份，具体可以在“小程序管理后台”-“用户身份”-“成员管理” 中查看。

- 权限说明

| 权限         | 说明                                                           |
| ------------ | -------------------------------------------------------------- |
| 开发者权限   | 可使用小程序开发者工具及开发版小程序进行开发                   |
| 体验者权限   | 可使用体验版小程序                                             |
| 登录         | 可登录小程序管理后台，无须管理员确认                           |
| 数据分析     | 可使用小程序数据分析功能查看小程序数据                         |
| 开发管理     | 小程序提交审核、发布、回退                                     |
| 开发设置     | 可设置小程序服务器域名、消息推送、扫描普通链接二维码打开小程序 |
| 暂停服务设置 | 可暂停小程序线上服务                                           |

- 权限分配

| 权限           | 说明                                                                     |
| -------------- | ------------------------------------------------------------------------ |
| 项目管理组成员 | 拥有所有权限                                                             |
| 开发组成员     | 开发者权限、体验者权限、数据分析、小程序插件、腾讯云管理、解除关联公众号 |
| 产品组成员     | 体验者权限、数据分析                                                     |
| 测试组成员     | 体验者权限                                                               |

### 4. 小程序版本

| 版本       | 说明                                                                                                                                                           |
| ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 开发版本   | 使用开发者工具，可将代码上传到开发版本中，开发版本只保留最新一份上传的版本。单击“提交审核”，可将代码提交审核。开发版本可删除，不影响线上版本和审核中版本的代码 |
| 审核中版本 | 只能有一份代码处于审核中。有审核结果后可以发布到线上，也可直接重新提交审核，覆盖原审核版本。                                                                   |
| 线上版本   | 线上所有用户使用的代码版本。该版本代码在新版本代码发布后会被覆盖更新。                                                                                         |

### 5. 提交审核及发布

为保证小程序的质量，以及符合相关规范，小程序的发布需要经过审核。在开发者工具中上传小程序代码后，登录“小程序管理后台”，在“开发管理”选项中，选择开发版本后找到提交上传的版本。

在开发版本的列表中，单击“提交审核” 按钮。按照页面的提示，填写相关的信息，即可将小程序提交审核。

需要注意的是，开发版本应严格测试后，再提交审核，以免因多次审核不通过，影响后续项目上线时间。

审核通过后，管理员的微信中会收到小程序通过审核的通知，此时登录“小程序管理后台”选择“开发管理”选项，在单击“审核版本”后，可以看到通过审核的版本，然后就可以进行发布了。

### 6. [修改小程序 logo 及名称](./[问题]%20修改小程序logo%20及名称.md)
