# JavaScript

JavaScript 的底层基础概念是理解这门语言如何工作的重要部分。以下是一些关键的基础概念，这些概念对于编写高效和可维护的 JavaScript 代码至关重要：

### 1. 词法结构（Lexical Structure）

- **标识符**：变量名、函数名等。
- **关键字**：如 `var`, `let`, `const`, `function`, `if`, `else`, `for`, `while` 等。
- **字面量**：字符串、数字、布尔值、对象、数组等。
- **运算符**：算术运算符、比较运算符、逻辑运算符、赋值运算符等。
- **分隔符**：括号 `()`, `{}`, `[]`；逗号 `,`；分号 `;` 等。

### 2. 词法作用域（Lexical Scoping）

- **全局作用域**：在最外层定义的变量具有全局作用域，可以在整个程序中访问。
- **函数作用域**：在函数内部定义的变量具有函数作用域，只能在该函数内部访问。
- **块级作用域**：使用 `let` 和 `const` 声明的变量具有块级作用域，只在声明它们的块（如 `{ ... }`）中可见。
- **闭包**：当一个函数返回另一个函数，并且返回的函数引用了外部函数的局部变量时，就会形成闭包。

### 3. 执行上下文（Execution Context）

- **全局执行上下文**：JavaScript 程序的最外层。
- **函数执行上下文**：每次函数被调用时创建。
- **执行上下文的生命周期**：
  - **创建阶段**：初始化变量对象（Variable Object）、设置作用域链（Scope Chain）、确定 `this` 值。
  - **执行阶段**：实际执行代码，分配内存给变量和函数，并执行相应的操作。
  - **销毁阶段**：执行完毕后，执行上下文会被销毁，除非有闭包或其他引用保持其存在。

### 4. 变量对象（Variable Object）

- **全局环境中的变量对象**：全局对象（如浏览器中的 `window` 或 Node.js 中的 `global`）。
- **函数环境中的变量对象**：活动对象（Activation Object），包含函数的参数、局部变量和内部函数。

### 5. 作用域链（Scope Chain）

- **作用域链**：每个执行上下文都有一个关联的作用域链，它是一个由多个变量对象组成的列表。作用域链用于解析标识符（变量名）。
- **查找过程**：当一个变量被引用时，JavaScript 引擎会从当前执行上下文的变量对象开始查找，如果找不到，则沿着作用域链向上查找，直到找到该变量或到达全局作用域。

### 6. `this` 关键字

- **全局上下文**：`this` 指向全局对象（如浏览器中的 `window` 或 Node.js 中的 `global`）。
- **函数上下文**：`this` 的值取决于函数的调用方式。
  - **简单调用**：`this` 指向全局对象。
  - **方法调用**：`this` 指向调用该方法的对象。
  - **构造函数调用**：`this` 指向新创建的对象实例。
  - **显式绑定**：使用 `call`, `apply`, `bind` 方法可以显式地设置 `this` 的值。
  - **箭头函数**：箭头函数没有自己的 `this`，它继承自外层作用域。

### 7. 垃圾回收（Garbage Collection）

- **标记-清除算法**：JavaScript 引擎定期检查哪些对象不再被引用，并释放它们占用的内存。
- **引用计数**：某些引擎可能使用引用计数来跟踪对象的引用数量，当引用数量为零时释放内存。

### 8. 单线程和事件循环（Event Loop）

- **单线程**：JavaScript 是单线程的，这意味着一次只能执行一个任务。
- **事件循环**：JavaScript 使用事件循环来处理异步操作，如定时器、网络请求等。事件循环不断检查任务队列，并按顺序执行任务。

### 9. 栈（Call Stack）和队列（Task Queue）

- **调用栈**：记录函数调用的历史，每进入一个函数就在栈顶添加一个帧，退出函数时弹出栈顶的帧。
- **任务队列**：存放异步任务，如定时器回调、事件回调等。事件循环会将任务队列中的任务依次放入调用栈中执行。

### 10. 严格模式（Strict Mode）

- **启用严格模式**：通过在脚本或函数顶部添加 `"use strict";` 来启用严格模式。
- **优点**：更严格的错误检查，防止一些常见的编程错误，提高性能。

### 总结

这些基础概念是 JavaScript 底层机制的核心，理解它们可以帮助你更好地编写和调试代码。如果你对某个特定的概念有更深入的问题或需要进一步的例子，请告诉我！
